<!DOCTYPE html>
<html>
<head>
<title>Student Dashboard</title>

<style>
body{font-family:Arial;background:#f4f7fb;text-align:center;}
header{
  background:#1a237e;
  color:white;
  padding:15px;
}
button{
  padding:8px 15px;
  margin:5px;
  background:#1a237e;
  color:white;
  border:none;
  border-radius:5px;
}
input{
  padding:8px;
  width:250px;
}
.card{
  background:white;
  margin:10px auto;
  width:400px;
  padding:10px;
  border-radius:8px;
}
</style>

</head>
<body>

<header>
<h2>Physio Knowledge Hub</h2>
<button onclick="logout()">Logout</button>
</header>

<br>
<input type="text" id="search" placeholder="Search Book">
<button onclick="searchBooks()">Search</button>

<div id="books"></div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAyQWphWzWz10vy-gQz4fq517ChU2MJtUc",
  authDomain: "physio-knowledge-hub.firebaseapp.com",
  projectId: "physio-knowledge-hub",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

onAuthStateChanged(auth,(user)=>{
 if(!user){
   window.location.href="index.html";
 }
});

window.logout=function(){
 signOut(auth).then(()=>{
   window.location.href="index.html";
 });
}

async function loadBooks(){
 const querySnapshot = await getDocs(collection(db,"books"));
 const container=document.getElementById("books");
 container.innerHTML="";

 querySnapshot.forEach(doc=>{
   const data=doc.data();
   container.innerHTML+=`
   <div class="card">
     <b>${data.title}</b><br>
     ${data.subject}<br>
     <a href="${data.pdfURL}" target="_blank">Open PDF</a>
   </div>`;
 });
}

window.searchBooks=loadBooks;

loadBooks();

</script>

</body>
</html>